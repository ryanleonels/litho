---
id: use-cached
title: useCached
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import VersionedCodeBlock from '@theme/VersionedCodeBlock';

`useCached` is a hook that, rather than have to repeatedly make an expensive calculation, enables a component to calculate and maintain a cached value. It is calculated when the component is first added to the ComponentTree, and only recalculated when any of the dependencies provided in the `useCached` declaration changes.

To familiarize yourself with the concept and rules for hooks, see the [Introduction to Hooks](hooks-intro.mdx) page.

## Example: Cached value with dependencies

In the following code, `useCached` is used to create and maintain an expensive-to-calculate value, which can be used multiple times across renders without repeating the expensive calculation.

Since the `useCached` declaration defines a dependency, the value will be calculated when the component is attached to the ComponentTree, and then recalculated every time the dependency changes.

```kotlin file=sample/src/main/java/com/facebook/samples/litho/kotlin/documentation/UseCachedWithDependencyComponent.kt start=start_example end=end_example
```

## Example: Cached value without dependencies

In the code below, since `useCached` does not declare a dependency, the value will be calculated only once when the component is attached to the ComponentTree but will not be recalculated when the state value changes. The initial value of the state will always be used.

:::note
It's a common mistake to use the state in `useCached` without defining it as a dependency then expect the cached value to be recalculated when the state is updated.
:::

```kotlin file=sample/src/main/java/com/facebook/samples/litho/kotlin/documentation/UseCachedWithoutDependencyComponent.kt start=start_example end=end_example
```
